# 接码平台后台管理系统

本文档介绍如何使用接码平台的管理后台系统。

## 功能概述

管理后台实现了以下功能：

1. **仪表盘**：展示平台关键统计数据
2. **用户管理**：用户的查询、新增、修改、禁用/启用
3. **项目管理**：项目的查询、新增、修改、删除
4. **号码管理**：号码查询、状态修改、删除、导出
5. **通知管理**：系统通知的创建、修改、删除
6. **系统设置**：配置系统全局参数
7. **操作日志**：查看系统操作日志
8. **健康监控**：监控系统健康状态和API指标

## 安装部署

1. 确保您的项目目录结构正确：
   ```
   /
   ├── app/
   │   ├── routes/
   │   │   ├── admin.py
   │   │   ├── system.py
   │   │   └── ...
   │   ├── __init__.py
   │   ├── models.py
   │   └── ...
   ├── static/
   │   ├── js/
   │   │   ├── admin.js
   │   │   └── admin_panel.js
   │   └── ...
   ├── app.py
   ├── admin_panel.html
   └── ...
   ```

2. 确保您已经安装了所有必要的依赖：
   ```bash
   pip install flask flask-sqlalchemy flask-cors psutil
   ```

3. 运行应用：
   ```bash
   python app.py
   ```

4. 在浏览器中访问管理后台：
   ```
   http://localhost:5000/admin
   ```

## 使用说明

### 登录管理后台

1. 访问管理后台URL
2. 输入管理员用户名和密码
3. 点击登录按钮

### 仪表盘

仪表盘显示系统的关键统计数据，包括：
- 用户数量
- 项目数量
- 号码总数
- 交易笔数
- 用户总余额
- 累计收入与消费

点击"导出统计数据"按钮可以导出统计数据。

### 用户管理

- **查看用户列表**：点击"用户管理"菜单
- **搜索用户**：在搜索框中输入用户名或邮箱关键词，点击搜索
- **新增用户**：点击"新增用户"按钮，填写表单，点击保存
- **编辑用户**：点击用户列表中的编辑按钮，修改信息，点击保存
- **禁用/启用用户**：点击用户列表中的禁用/启用按钮

### 项目管理

- **查看项目列表**：点击"项目管理"菜单
- **搜索项目**：在搜索框中输入项目名称或代码关键词，点击搜索
- **新增项目**：点击"新增项目"按钮，填写表单，点击保存
- **编辑项目**：点击项目列表中的编辑按钮，修改信息，点击保存
- **删除项目**：点击项目列表中的删除按钮

### 号码管理

- **查看号码列表**：点击"号码管理"菜单
- **搜索号码**：在搜索框中输入号码关键词，选择状态，点击搜索
- **修改号码状态**：点击号码列表中的编辑按钮，选择新状态，点击保存
- **删除号码**：点击号码列表中的删除按钮
- **导出号码**：点击"导出号码"按钮

### 通知管理

- **查看通知列表**：点击"通知管理"菜单
- **新增通知**：点击"新增通知"按钮，填写表单，点击保存
- **编辑通知**：点击通知列表中的编辑按钮，修改信息，点击保存
- **删除通知**：点击通知列表中的删除按钮

### 系统设置

- **查看当前设置**：点击"系统设置"菜单
- **修改设置**：修改表单中的设置值，点击保存

### 操作日志

- **查看操作日志**：点击"操作日志"菜单
- **分页浏览**：使用分页控件浏览更多日志

### 健康监控

- **查看系统健康状态**：点击"健康监控"菜单
- **查看API指标**：在健康监控页面查看API调用统计
- **重置API指标**：点击"重置API指标"按钮

## API接口文档

管理后台使用以下API接口：

### 认证接口

- `POST /api/auth/login`：管理员登录
- `GET /api/auth/verify`：验证token有效性

### 用户管理接口

- `GET /api/admin/users`：获取用户列表
- `GET /api/admin/users/{id}`：获取用户详情
- `POST /api/admin/users`：创建新用户
- `PUT /api/admin/users/{id}`：更新用户信息
- `DELETE /api/admin/users/{id}`：禁用用户

### 项目管理接口

- `GET /api/admin/projects`：获取项目列表
- `POST /api/admin/projects`：创建新项目
- `PUT /api/admin/projects/{id}`：更新项目信息
- `DELETE /api/admin/projects/{id}`：删除项目

### 号码管理接口

- `GET /api/admin/numbers`：获取号码列表
- `PUT /api/admin/numbers/{id}`：更新号码状态
- `DELETE /api/admin/numbers/{id}`：删除号码

### 通知管理接口

- `GET /api/admin/notifications`：获取通知列表
- `POST /api/admin/notifications`：创建新通知
- `PUT /api/admin/notifications/{id}`：更新通知信息
- `DELETE /api/admin/notifications/{id}`：删除通知

### 系统设置接口

- `GET /api/system/settings`：获取系统设置
- `POST /api/system/settings`：更新系统设置

### 健康监控接口

- `GET /api/system/health`：获取系统健康状态
- `GET /api/system/metrics`：获取API指标
- `POST /api/system/reset-metrics`：重置API指标

### 统计数据接口

- `GET /api/admin/statistics`：获取仪表盘统计数据

### 日志接口

- `GET /api/admin/logs`：获取操作日志

## 安全注意事项

1. 确保管理员账号密码安全
2. 定期更改管理员密码
3. 限制管理后台访问IP
4. 使用HTTPS保护数据传输
5. 避免在公共网络环境访问管理后台

## 故障排除

如果遇到问题：

1. 检查浏览器控制台是否有错误信息
2. 检查服务器日志
3. 确认API接口是否正常工作
4. 验证数据库连接是否正常
5. 重启应用服务器尝试解决 